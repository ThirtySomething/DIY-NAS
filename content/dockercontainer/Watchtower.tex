%% -----------------------------------------------------------------------------
%% MIT License
%%
%% Copyright 2022 ThirtySomething
%%
%% Permission is hereby granted, free of charge, to any person obtaining a
%% copy of this software and associated documentation files (the "Software"),
%% to deal in the Software without restriction, including without limitation
%% the rights to use, copy, modify, merge, publish, distribute, sublicense,
%% and/or sell copies of the Software, and to permit persons to whom the
%% Software is furnished to do so, subject to the following conditions:
%%
%% The above copyright notice and this permission notice shall be included
%% in all copies or substantial portions of the Software.
%%
%% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
%% OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
%% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
%% THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
%% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
%% FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
%% DEALINGS IN THE SOFTWARE.
%% -----------------------------------------------------------------------------

%% -----------------------------------------------------------------------------
%% Content of DIY NAS description
%% -----------------------------------------------------------------------------

\subsection{Watchtower}

The \href{https://containrrr.dev/watchtower/}{Watchtower} container is very
simple to install. There is no need for a volume. And -- they offer on their
website a \tsTextMonospace{docker-compose.yaml} file. Just copy this definition
to a new Portainer stack, deploy and run. I've extended the default file with
the settings of email notifications.

\begin{figure}[H]
    \scriptsize
    \centering
    \begin{BVerbatim}
version: "3"
services:
    watchtower:
    image: containrrr/watchtower
    volumes:
        - /var/run/docker.sock:/var/run/docker.sock
    environment:
        # WATCHTOWER_MONITOR_ONLY: 'true'
        WATCHTOWER_NOTIFICATIONS: email
        WATCHTOWER_NOTIFICATION_EMAIL_FROM: developer@derpaul.net
        WATCHTOWER_NOTIFICATION_EMAIL_TO: developer@derpaul.net
        WATCHTOWER_NOTIFICATION_EMAIL_SERVER: <smtp server>
        WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PORT: 587
        WATCHTOWER_NOTIFICATION_EMAIL_SERVER_USER: developer@derpaul.net
        WATCHTOWER_NOTIFICATION_EMAIL_SERVER_PASSWORD: <top secret password>
        WATCHTOWER_NOTIFICATION_EMAIL_DELAY: 2
    \end{BVerbatim}
    \tsCaptionLabelFigure{docker-compose.yaml for Watchtower}
\end{figure}

This container does not have any user interface. The purpose of this container
is to keep all other containers with the \tsTextMonospace{:latest} suffix up
to date. In concrete means this to check for newer versions of containers and
will update/restart them automagically if required. For german users there is
an \href{https://www.youtube.com/watch?v=TFS-s5Aq028}{introduction} video
available.
